---
title: "Problem Overview"
author: "Marie Hardt"
format: html
bibliography: "`r rbbt::bbt_write_bib('overviewreferences.bib', keys=rbbt::bbt_detect_citations(here::here('problem_overview.qmd')),
   ignore = stringr::str_subset(rbbt::bbt_detect_citations(here::here('problem_overview.qmd')), '(^fig-|^tbl-|^eq-|^sec-|^lst-|^thm-|^lem-|^cor-|^prp-|^cnj-|^def-|^exm-|^exr-)'), overwrite = TRUE, library_id='Graphics-Research', translator='bibtex')`"
---

```{r}
#| echo: false
library(rbbt)
```

# Overview of Data Sources

For this project, we use two primary data sources: naturalistic driving study (NDS) data and connected vehicle (CV) data. Both sources and their associated variables are described in further detail below.

## Naturalistic Driving Study Data

The NDS data come from a naturalistic driving study conducted by the University of Nebraska Medical Center (UNMC). Data for the study were collected at two 3-month intervals conducted over two years (2 data collection periods). At the start of each 3-month NDS data collection period, custom-built "Black Boxes" were installed in each study participant’s personal vehicle. The "Black Box" system continuously and passively recorded driver behavior from when the vehicle ignition was turned on to when it was turned off. Video of the forward roadway and the vehicle cabin were recorded by cameras mounted on the vehicle’s front windshield, next to the rearview mirror. Multiple sensors (GPS, speed, accelerometer, gyroscope, and throttle) collected data during each drive. The raw data were post-processed to a sampling rate of 1 Hz to ensure data quality. <!-- Borrowed from the left turns paper -->

The variables available in the processed UNMC NDS data are described in @tbl-rwrad below.

<!-- From the file BlackBox_FormatQAPass_DataDictionary.docx -->

+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| Variable        | Description                                                                                                                                                                                                                                                                                                                                           | Unit/Value(s)            |
+=================+=======================================================================================================================================================================================================================================================================================================================================================+==========================+
| subj            | Subject ID                                                                                                                                                                                                                                                                                                                                            | character string         |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| file            | File path of original 1hz or 10hz data source for data time-point                                                                                                                                                                                                                                                                                     | character string         |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| device          | Device ID of Black Box                                                                                                                                                                                                                                                                                                                                | character string         |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| drive           | Numeric value sequentially ordered across time indicating what drive number the data corresponds to                                                                                                                                                                                                                                                   | numeric                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| time_utc        | date time-stamp in UTC, format depends on 1hz or 10hz data                                                                                                                                                                                                                                                                                            | UTC                      |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | 1hz: Y-M-D H:M:S         |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | 10hz: Y-M-D H:M:S.X00005 |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| time_cst        | date time-stamp in CST, format depends on 1hz or 10hz data                                                                                                                                                                                                                                                                                            | CST                      |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | 1hz: Y-M-D H:M:S         |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | 10hz: Y-M-D H:M:S.X00005 |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_long        | Longitude returned from GPS                                                                                                                                                                                                                                                                                                                           | Degrees                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_lat         | Latitude returned from GPS                                                                                                                                                                                                                                                                                                                            | Degrees                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_elevation   | Elevation returned from GPS                                                                                                                                                                                                                                                                                                                           | m                        |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_heading     | The direction over the ground the vehicle is currently moving                                                                                                                                                                                                                                                                                         | Degrees                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_fix         | Value specifying adequacy of GPS fix for good data. Generally, a fix type of 2 should be used for good GPS location data and more precise location estimates from GPS (like needed for speed) should use a fix of 3. Fix type of 1 is the theoretical minimum for GPS time data, however data inspection suggests this maybe should be adjusted to 2. | -   0 = no fix           |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | -   1 = time only        |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | -   2 = 2D fix           |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | -   3 = 3D fix           |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_sats        | Number of satellites the GPS unit can "see"                                                                                                                                                                                                                                                                                                           | Count                    |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_pdop        | Dilution fo Precision measure for 3D position                                                                                                                                                                                                                                                                                                         | -   \<1 = Ideal          |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | -   1-2 = Excellent      |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | -   2-5 = Good           |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | -   5-10 = Moderate      |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | -   10-20 = Fair         |
|                 |                                                                                                                                                                                                                                                                                                                                                       |                          |
|                 |                                                                                                                                                                                                                                                                                                                                                       | -   \>20 = Poor          |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_hdop        | Dilution of Precision measure for the horizontal plane                                                                                                                                                                                                                                                                                                | See gps_pdop             |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gps_vdop        | Dilution of Precision measure for the vertical axis                                                                                                                                                                                                                                                                                                   | See gps_pdop             |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| speed_mph       | Merged and QA'ed speed, combined from GPS and OBD sensors                                                                                                                                                                                                                                                                                             | mph                      |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| speed_source    | Name of sensor the speed data point was originally from (GPS sensors tend to record slightly higher speeds than OBD sensors.)                                                                                                                                                                                                                         | obd/gps                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| distance_miles  | Value indicating how much distance the vehicle has traversed at each time-point (computed from speed_mph)                                                                                                                                                                                                                                             | numeric                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| accel_x         | Measure of vehicle acceleration along the front-back (longitudinal) axis                                                                                                                                                                                                                                                                              | fractional g             |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| accel_y         | Measure of vehicle acceleration along the right-left (lateral) axis                                                                                                                                                                                                                                                                                   | fractional g             |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| accel_z         | Measure of acceleration of the vehicle in the up-down plane (normal/yaw axis)                                                                                                                                                                                                                                                                         | fractional g             |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| accel_event     | Sequential (over time) variable marking when consecutive acceleration values (absolute value of accel_x/y) exceed a threshold for a minimum duration of time. Threshold is set by user - the default is 0.35g and minimum duration of 1 second.                                                                                                       | numeric                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| accel_event_cat | Severity rating of each acceleration event. Value can be set by user, but default values are low = 0.35-0.44g, med = 0.45-0.59g, and high = 0.6+                                                                                                                                                                                                      | low/med/high             |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gyro_x          | Angular rotation rate about the right-to-left axis                                                                                                                                                                                                                                                                                                    | Degrees/sec              |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gyro_y          | Angular rotation rate about the forward-to-backward axis                                                                                                                                                                                                                                                                                              | Degrees/sec              |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gyro_z          | Angular rotation rate about the up-to-down axis                                                                                                                                                                                                                                                                                                       | Degrees/sec              |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| gyro_heading    | Calculated heading utilizing compass data and gyro data                                                                                                                                                                                                                                                                                               | Degrees                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| grav_x          | Gravity vector x (lateral)                                                                                                                                                                                                                                                                                                                            | g                        |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| grav_y          | Gravity vector y (longitudinal)                                                                                                                                                                                                                                                                                                                       | g                        |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| grav_z          | Gravity vector z (up-down)                                                                                                                                                                                                                                                                                                                            | g                        |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| roll            | Angle about the forward-to-backward axis. 0 = level, positive = tilted to the left                                                                                                                                                                                                                                                                    | Degrees                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| pitch           | Angle about the left-to-right axis. 0 = level, positive = tilted downward (i.e., vehicle going downhill)                                                                                                                                                                                                                                              | Degrees                  |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| engine_rpm      | The current engine revolutions per minute value                                                                                                                                                                                                                                                                                                       | RPM                      |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+
| engine_throttle | Engine throttle as a percentage (0-100)                                                                                                                                                                                                                                                                                                               | \%                       |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------+

: UNMC NDS Metadata {#tbl-rwrad}

## Connected Vehicle Data

The CV data come from the data provider StreetLight and are available from the Institute for Transportation (InTrans) at Iowa State University. The connected vehicles directly provide trajectory information every 1-3 seconds throughout their journeys. Each trip is uniquely identified by a unique JourneyID and each data point has a unique DatapointID.

The CV data continuously stream into InTrans, which listens and archives data approximately every 60 seconds. The data are processed as they are archived, and part of the process involves relating the CV data to the Iowa DOT road network, as provided by the Road Asset Management System (RAMS). The road network is broken into approximately 0.1 mile segments for relating to the CV data. The CV data points are associated to the closest roadway, and the priority of a roadway for association to the CV is determined by the roadway's facility type. @tbl-roadnetwork provides names and descriptions of the fields used to match the CV data to the road system.

+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Field                    | Source  | Units           | Description                                                                                                                                                                                                                                                                                                                                                                                                                        | Domains                                                           |
+==========================+=========+=================+====================================================================================================================================================================================================================================================================================================================================================================================================================================+===================================================================+
| route_id                 | RAMS    | NA              | This field is the unique identifier for a route. The segmentation is based on Iowa DOT's RAMS network (<https://gis.iowadot.gov/rams/rest/services/lrs/FeatureServer>).                                                                                                                                                                                                                                                            |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| route_from_measure       | RAMS    | mi              | Do not recommend using. This field is the minimum measure for a route but does not represent the actual location of the segment.                                                                                                                                                                                                                                                                                                   |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| route_to_measure         | RAMS    | mi              | Do not recommend using. This field is the maximum measure for a route but does not represent the actual location of the segment.                                                                                                                                                                                                                                                                                                   |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_start_latitude   | RAMS    | Decimal degrees | This field represents the latitude of the start of the segment along the RAMS network.                                                                                                                                                                                                                                                                                                                                             |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_start_longtitude | RAMS    | Decimal degrees | This field represents the longitude of the start of the segment along the RAMS network.                                                                                                                                                                                                                                                                                                                                            |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_end_latitude     | RAMS    | Decimal degrees | This field represents the latitude of the end of the segment along the RAMS network.                                                                                                                                                                                                                                                                                                                                               |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_end_longitude    | RAMS    | Decimal degrees | This field represents the longitude of the end of the segment along the RAMS network.                                                                                                                                                                                                                                                                                                                                              |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_start_measure    | RAMS    | mi              | This field represents the measures at the beginning of the segment along the RAMS network. This field should be used when relating to the CV data.                                                                                                                                                                                                                                                                                 |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_end_measure      | RAMS    | mi              | This field represents the measures at the end of the segment along the RAMS network. This field should be used when relating to the CV data.                                                                                                                                                                                                                                                                                       |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_length           | RAMS    | mi              | The is the calculated distance of the segment based on the difference between the `segment_start_measure` and `segment_end_measure`                                                                                                                                                                                                                                                                                                |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| geohash_lrs              | Derived | NA              | This field provides a unique identifier for a specific region on earth. Can be used to identify a specific location for filtering data.                                                                                                                                                                                                                                                                                            | <https://www.ibm.com/docs/en/streams/4.3.0?topic=334-geohashes>   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| bearing                  | Derived | Degrees         | The direction of the roadway in degrees (not the same as CV data). The bearing values include 0 degrees is North, 90 is East, 180 is South and 270 is West. For divided or one way roadways, the bearing represents the direction of travel for vehicles. For undivded roadways, the bearing represents the primary direction (North or East) of vehicles (but vehicles can also travel in the opposite direction of the bearing). |                                                                   |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| facility_type            | RAMS    | NA              | This represents the type of roadway the segment is defined as in RAMS. The facility type is defined in RAMS.                                                                                                                                                                                                                                                                                                                       | <https://gis.iowadot.gov/rams/rest/services/lrs/FeatureServer/44> |
+--------------------------+---------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+

: Road Network Metadata {#tbl-roadnetwork}

Connected vehicles collect a variety of data throughout their journeys, including vehicle location, speed, and heading. Other variables, such as acceleration, are derived from the data. @tbl-cvmetadata provides an overview of the available variables in the CV data.

+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Field                 | Source  | Units                 | Description                                                                                                                                           | Possible Issues                                                                                                                                                                    | Domains                                                           |
+=======================+=========+=======================+=======================================================================================================================================================+====================================================================================================================================================================================+===================================================================+
| datapoint_id          | Derived | NA                    | Unique identifier for each data point                                                                                                                 |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| journey_id            | Raw     | NA                    | Unique identifier for each vehicle journey. The journey id represents the same vehicle from ignition on to ignition off.                              | Streetlight notified us that some journey ids are non-compliant due to not having an ignition on/off. Typically due to data coming in late.                                        |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| capture_time_stamp    | Raw     | UTC                   | Timestamp of the data in UTC format                                                                                                                   |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| latitude              | Raw     | decimal degrees WGS84 | The latitude value for the data point                                                                                                                 |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| longitude             | Raw     | decimal degrees WGS84 | The longitude value for the data point                                                                                                                |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| heading_deg           | Raw     | degrees               | The direction the vehicle is traveling where 0 degrees is East, 90 is North, 180 is West and 270 is South.                                            |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| elevation_ft          | Raw     | feet                  | The vertical distance above sea level measured in feet.                                                                                               |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| speed_mph             | Raw     | mph                   | The speed of the vehicle for the data point                                                                                                           |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| acceleration          | Derived | ft/s^2^               | The derived acceleration between the previous data point for the journey                                                                              |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| ignition_status       | Raw     | NA                    | Attribute to identify whether the data is at the begin/end of the trip or part of the middle of the trip                                              |                                                                                                                                                                                    | MIDTRIP, KEYON, KEYOFF                                            |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| route_id              | Derived | NA                    | This field provides the closest route id segments to the data point.                                                                                  |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| measure               | Derived | mi                    | This field provides the precise measure value along the route id segments to the data point. The segmentation is based on Iowa DOT RAMS network.      |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| distance_from_route   | Derived | ft                    | This field provides the distance the data point is from the centerline of the RAMS network.                                                           | Data points in parking lots and fields will still be associated to the closest roadway. This field can be used to filter data that is only within a set distance from the roadway. |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_start_measure | Derived | mi                    | This field provides the segment start measure value along the route id segments to the data point.                                                    |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| segment_end_measure   | Derived | mi                    | This field provides the segment end measure value along the route id segments to the data point.                                                      |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| geohash               | Derived | NA                    | This field provides a unique identifier for a specific region on earth. Can be used to identify a specific location for filtering data.               |                                                                                                                                                                                    | <https://www.ibm.com/docs/en/streams/4.3.0?topic=334-geohashes>   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| masking_digit         | Derived | NA                    | The number of digits in the latitude or longitude (whichever is smaller). Used to identify whether the data is masked (value less than 5).            |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| year                  | Derived | NA                    | The year partition that data was downloaded in (not necessarily the year of the capture_time_stamp).                                                  |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| county_id             | Derived | NA                    | The county the data point is located within. The county is represented by a number which can be identified in RAMS located at the link in the domain. |                                                                                                                                                                                    | <https://gis.iowadot.gov/rams/rest/services/lrs/FeatureServer/43> |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| month                 | Derived | NA                    | The month partition that data was downloaded in (not necessarily the month of the capture_time_stamp).                                                |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| day                   | Derived | NA                    | The day of month partition that data was downloaded in (not necessarily the day of month of the capture_time_stamp).                                  |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| hour                  | Derived | NA                    | The hour partition that data was downloaded in (not necessarily the hour of the capture_time_stamp).                                                  |                                                                                                                                                                                    |                                                                   |
+-----------------------+---------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+

: Connected Vehicle Metadata {#tbl-cvmetadata}

# Overview of the Problem

As we have worked with driving data, particularly the NDS data from the UNMC study, we have noticed that GPS location data can drift away from the road system. These errors make geospatial analysis of the data much more challenging. The map-matching problem arises from the need to associate GPS points from a moving vehicle to the road system. 

There are many map-matching algorithms available, ranging from simple to complex. A simple way to solve the GPS drift problem would be to snap the GPS points to the nearest road. This method is fast, but it is sensitive to outliers and does not incorporate information from previous points. Another option is to fit a curve through a sequence of GPS points and find the road segments that best match the curve, although this method does not work well in practice. If heading information is available for the vehicle and the road system, it can be used to check the quality of matches. Matches should be discarded if the vehicle heading and the road heading do not match. Kalman filters can be used to drop unreasonable GPS points and clean up the data [@sakiPracticalGuideOpenSource2022]. 

Map-matching with hidden Markov models (HMMs) was introduced by @newsonHiddenMarkovMap2009, whose algorithm performed map matching using a hidden Markov model to find the most likely route on the road system corresponding to a time-stamped set of GPS coordinates while accounting for noisy data and the configuration of the road network. However, this was not a real-time algorithm. Hidden Markov models are a common basis for many later map-matching algorithms. 

@chaoSurveyMapMatchingAlgorithms2020a surveyed available map-matching algorithms. State-transition models are a popular model type. These include hidden Markov models (HMMs) and conditional random field (CRF) models. CRF models models account for interactions among observations while HMMs only consider the relationship between an observation and the most recent previous point. Weighted graph techniques can be used to infer the path from a weighted graph where the vertices are candidate points on the road system and edges are formed between two consecutive sample points. Weighted graph techniques tend to involve the following steps: (1) Initialize the graph (2) Use a scoring function to weight the edges in the graph (3) Infer the path based on the weighted graph. 

As mentioned above, map-matching algorithms can suffer from data quality issues. When the sampling rate is high, unnecessary detours can occur. This means that consecutive points may be too close to each other, so the later point is mapped in the upstream of the previous point. State-transition models, in particular, can suffer from matching breaks caused by outliers. The outlier point falls out of the candidate range for the true state, and so the map-matching route disconnects [@chaoSurveyMapMatchingAlgorithms2020a]. Evaluating the accuracy of any map-matching algorithm can be challenging because the true path taken by the vehicle is unknown [@sakiPracticalGuideOpenSource2022]. 


